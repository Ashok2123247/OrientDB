// Simple function to find users with a specific role in a database
function findUsersByRole(roleName, dbName) {
    const targetDB = db.getSiblingDB(dbName || 'admin');
    const allUsers = targetDB.getUsers();
    
    const usersWithRole = allUsers.filter(user => 
        user.roles.some(role => 
            role.role === roleName || 
            (typeof role.role === 'object' && role.role.role === roleName)
        )
    );
    
    return usersWithRole.map(user => ({
        username: user.user,
        database: dbName || 'admin',
        roles: user.roles
    }));
}
