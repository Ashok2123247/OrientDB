#!/bin/bash
# HTML-formatted MongoDB find() results

DB_NAME="your_db"
COLLECTION="your_collection"
QUERY='{}'  # Your query filter (e.g., '{"status": "active"}')
PROJECTION='{}' # Fields to include (e.g., '{"name":1, "email":1}')

HTML=$(mongo --quiet --eval "
var results = db.getCollection('$COLLECTION').find($QUERY, $PROJECTION).limit(50).toArray();
var html = '<html><head><style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h2 { color: #2c3e50; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th { background-color: #3498db; color: white; padding: 10px; text-align: left; }
  td { padding: 8px; border-bottom: 1px solid #ddd; }
  tr:hover { background-color: #f5f5f5; }
  .count { margin: 10px 0; color: #7f8c8d; }
</style></head>
<body>
<h2>MongoDB Query Results: $DB_NAME.$COLLECTION</h2>
<div class=\"count\">Showing ' + results.length + ' documents</div>
<table>';

// Generate headers from first document
if (results.length > 0) {
  html += '<tr>';
  for (var key in results[0]) {
    html += '<th>' + key + '</th>';
  }
  html += '</tr>';
}

// Add rows
results.forEach(function(doc) {
  html += '<tr>';
  for (var key in doc) {
    html += '<td>' + JSON.stringify(doc[key]).replace(/"/g, '') + '</td>';
  }
  html += '</tr>';
});

html += '</table></body></html>';
print(html);
")

echo "$HTML" > output.html
echo "HTML output saved to output.html"
